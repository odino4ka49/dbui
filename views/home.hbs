
<script src="/bower_components/bootstrap-treeview/src/js/bootstrap-treeview.js"></script>
<script src="https://cdn.zingchart.com/zingchart.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<script src="/static/js/chart.js"></script>
<script src="/static/js/tree.js"></script>
<script src="/static/js/timepicker.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
<link href="/static/css/dbtree.css" rel="stylesheet">
<link href="/bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">

<input id="datetimerange" type="text" name="datetimes" />
<div id="dbtree" class="inline"></div>
<div id="test_zingchart" class="inline"></div>
<br/>

<script>

    window.WebSocket = window.WebSocket || window.MozWebSocket;

    var connection = new WebSocket('ws://127.0.0.1:1337');

    connection.onopen = function () {
        // connection is opened and ready to use
    };

    connection.onerror = function (error) {
        // an error occurred when sending/receiving data
    };

    connection.onmessage = function (message) {
        try {
            var json = JSON.parse(message.data);
            if(json.title == "channel_data"){
                renderChart(json.name,json.data);
            }
            else{
                refreshTree(json);
            }
        } catch (e) {
            console.log(e);
            return;
        }
    };

    function sendMessageToServer(message){
        connection.send(message);
    }

    initPicker();

</script>